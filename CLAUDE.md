# 📄 CLAUDE.md - PRD for Enhanced World Cup Platform

## 🧭 프로젝트 개요

* **프로젝트명**: 차세대 커뮤니티형 이상형 월드컵 플랫폼
* **목표**: PIKU 대비 향상된 UX/UI, 확장성, 편의성 제공
* **핵심 가치**: 직관적 인터페이스, 빠른 로딩, 사용자 중심 설계

## 🎯 PIKU 분석 기반 개선사항

### 📱 UI/UX 향상
* **반응형 그리드**: 4-6열 → 디바이스별 최적화 (모바일 2열, 태블릿 3열, 데스크톱 4-6열)
* **이미지 최적화**: WebP/AVIF 포맷, 점진적 로딩, 블러 플레이스홀더
* **인터랙션 개선**: 호버 효과, 부드러운 전환 애니메이션
* **접근성**: 키보드 네비게이션, 스크린 리더 지원, 고대비 모드

### ⚡ 성능 최적화
* **무한 스크롤**: 가상화로 10,000+ 항목 대응
* **지연 로딩**: Intersection Observer API 활용
* **프리페칭**: 사용자 의도 예측 기반 콘텐츠 미리 로드
* **캐싱 전략**: Service Worker + 메모리 캐시

### 🔧 편의성 기능
* **빠른 시작**: 원클릭 월드컵 생성 (템플릿 제공)
* **진행 상태 저장**: 로컬 스토리지 + 세션 복구
* **키보드 단축키**: 
  - 화살표키 (←/→) 선택
  - Spacebar 재생/일시정지 (영상)
  - Esc 되돌리기
  - Enter 다음 라운드
* **제스처 지원**: 스와이프 선택 (모바일)

## 🏗 핵심 기능 상세

### 🎮 월드컵 플레이
```
- 토너먼트 브라켓 시각화
- 실시간 진행률 표시 (16강 → 8강 → ...)
- 예상 완료 시간 표시
- 되돌리기 무제한 (히스토리 스택)
- 결과 공유 (이미지 생성)
```

### 🛠 콘텐츠 생성
```
- 드래그 앤 드롭 업로드
- 유튜브 URL 자동 파싱 (시작/종료 시간)
- 이미지 자동 크롭/리사이징
- 실시간 미리보기
- 템플릿 기반 빠른 생성
```

### 📊 통계 및 랭킹
```
- 실시간 투표 결과
- 항목별 승률 통계
- 라운드별 인기도 분석
- 트렌딩 월드컵 (시간대별)
- 사용자 참여 통계
```

### 🌐 소셜 기능
```
- 댓글 시스템 (대댓글 지원)
- 좋아요/북마크
- 공유 기능 (URL + 이미지)
- 팔로우/구독 (제작자)
- 월드컵 시리즈 연결
```

## 📐 개선된 정보 아키텍처

### 메인 페이지 레이아웃
```
Header: 로고, 검색, 카테고리, 사용자 메뉴
Filters: 정렬 (인기/최신/참여많은순), 카테고리 탭
Grid: 카드 그리드 (무한스크롤)
Footer: 링크, 정보
```

### 카드 컴포넌트 구조
```
- 썸네일 (16:9 비율 고정)
- 제목 (2줄 말줄임)
- 제작자 + 생성일
- 통계 (참여자수, 댓글수)
- 액션 버튼 (시작하기, 북마크, 공유)
```

## 🛡 콘텐츠 관리

### 자동 필터링
```
- 이미지 해시 기반 중복 검출
- 텍스트 필터링 (욕설, 부적절한 내용)
- 신고 시스템 (커뮤니티 자정)
- 관리자 검토 큐
```

### 저작권 보호
```
- 워터마크 자동 추가
- 출처 표기 필수
- DMCA 신고 시스템
- 라이선스 정보 표시
```

## 🔧 기술 스택

### Frontend
```typescript
- Next.js 14 (App Router)
- TypeScript
- TailwindCSS + Headless UI
- Framer Motion (애니메이션)
- React Hook Form + Zod
- Zustand (상태관리)
- React Query (서버상태)
```

### Backend
```typescript
- Node.js + Express
- PostgreSQL (메인 DB)
- Redis (캐시, 세션)
- S3 (파일 저장)
- Socket.io (실시간)
- Bull (큐 시스템)
```

### DevOps
```
- Docker + Docker Compose
- GitHub Actions (CI/CD)
- Vercel (Frontend 배포)
- AWS/Railway (Backend 배포)
- Sentry (에러 모니터링)
```

## 📈 단계별 개발 계획

### Phase 1 - Core MVP (4주)
- [ ] 월드컵 플레이 기본 기능
- [ ] 콘텐츠 생성/업로드
- [ ] 반응형 UI 구현
- [ ] 기본 통계 기능

### Phase 2 - 커뮤니티 (3주)
- [ ] 댓글/좋아요 시스템
- [ ] 사용자 인증/프로필
- [ ] 검색/필터링
- [ ] 공유 기능

### Phase 3 - 고도화 (3주)
- [ ] 실시간 기능
- [ ] 관리자 도구
- [ ] 성능 최적화
- [ ] 모니터링 구축

## 🎨 디자인 시스템

### 컬러 팔레트
```css
Primary: #10B981 (에메랄드)
Secondary: #3B82F6 (블루)
Accent: #F59E0B (앰버)
Neutral: #6B7280 (그레이)
```

### 타이포그래피
```css
제목: 'Pretendard' 700
본문: 'Pretendard' 400
캡션: 'Pretendard' 300
```

### 컴포넌트 가이드
- 카드: 둥근 모서리 8px, 그림자 subtle
- 버튼: 라운드 6px, 호버 효과
- 입력: 보더 1px, 포커스 링

### 꼭 숙지 할 것
- 기능을 추가할 땐 테스트를 먼저 만드는 TDD 방식으로 개발해줘.
- 코드를 짜고 나면, rail test 명령을 통해 테스트가 잘 성공하는지 반드시 확인하도록 해.
- test 코드를 추가할 땐 minitest를 사용해. Rspec은 쓰지마, fixtures를 추가할 땐 내게 물어보고 추가해.
---

> 본 문서는 PIKU 분석을 기반으로 한 차세대 월드컵 플랫폼 설계서입니다.